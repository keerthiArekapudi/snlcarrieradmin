/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.require("sap.ca.ui.message.message");sap.ui.controller("splController.registeration.SplitAppBase",{onInit:function(){var t=this;this.oSplitAppBase=this.getView().byId("SplitAppBase");this.aSplViewsRegistry=this.getViewRegistry();oSapSplUtils.setSplitAppBaseOne(this);this.subscribeNavigationEvents();this.createODataModelForMyColleagues();this.instantiatePages();this.setInitialState();this.getView().addEventDelegate({onAfterShow:function(){t.oSplitAppBase.getCurrentMasterPage().byId("sapSplSearchMyUsersMasterList").focus();}});},createODataModelForMyColleagues:function(){},setInitialState:function(){try{if(this.getView().byId("SplitAppBase")){this.getView().byId("SplitAppBase").setInitialMaster("MyContactsMaster");this.getView().byId("SplitAppBase").setInitialDetail("MyContactDetails");if(jQuery.sap.getUriParameters().get("navToHome")&&jQuery.sap.getUriParameters().get("navToHome")==="true"){oSapSplUtils.showHeaderButton({showButton:true,sNavToPage:"splView.tileContainer.MasterTileContainer"});}}else{throw new Error();}}catch(e){if(e.constructor===Error()){jQuery.sap.log.error(e.message,"SplitApp control not instantiated for MyContacts",this.getView().getControllerName());}}},instantiatePages:function(){var m=null;var n=null;var a=null;a=sap.ui.view({id:"MyContactDetails",viewName:"splView.registeration.MyContactDetails",type:sap.ui.core.mvc.ViewType.XML});m=sap.ui.view({id:"MyContactsMaster",viewName:"splView.registeration.MyContactsMaster",type:sap.ui.core.mvc.ViewType.XML,viewData:this.getView()});n=sap.ui.view({id:"NewContactRegistrationDetail",viewName:"splView.registeration.NewContactRegistrationDetail",type:sap.ui.core.mvc.ViewType.XML});m.addEventDelegate({onBeforeShow:jQuery.proxy(m.getController().onBeforeShow,m.getController())});n.addEventDelegate({onBeforeShow:jQuery.proxy(n.getController().onBeforeShow,n.getController())});a.addEventDelegate({onBeforeShow:jQuery.proxy(a.getController().onBeforeShow,a.getController())});m.getController().setUnifiedShellInstance(this.getUnifiedShellInstance());n.getController().setUnifiedShellInstance(this.getUnifiedShellInstance());a.getController().setUnifiedShellInstance(this.getUnifiedShellInstance());splReusable.libs.SapSplStyleSheetLoader.loadStyle("./resources/styles/splContactRegistration");try{if(this.getView().byId("SplitAppBase")){this.getView().byId("SplitAppBase").addDetailPage(a);this.getView().byId("SplitAppBase").addDetailPage(n);this.getView().byId("SplitAppBase").addMasterPage(m);}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Cannot access SplitApp Control in MyContacts.",this.getView().getControllerName());}}},onBeforeShow:function(e){sap.ui.getCore().getModel("myContactListODataModel").refresh();this.setCurrentAppInfo(e);if(sap.ui.getCore().getModel("myContactDetailModel")&&this.getView().byId("SplitAppBase")){this.getView().byId("SplitAppBase").toDetail("MyContactDetails");var m=sap.ui.getCore().getModel("myContactDetailModel").getData();m["isClicked"]=false;m["noData"]=true;m["showFooterButtons"]=false;sap.ui.getCore().getModel("myContactDetailModel").setData(m);}},onAfterShow:function(){var c=new sap.ui.core.CustomData({key:"bRefreshTile",value:true});oSplBaseApplication.getAppInstance().getCurrentPage().destroyCustomData();oSplBaseApplication.getAppInstance().getCurrentPage().addCustomData(c);},setCurrentAppInfo:function(e){oSapSplHelpHandler.setAppHelpInfo({iUrl:"./help/SCLUsers.pdf",eUrl:"//help.sap.com/saphelp_scl10/helpdata/en/77/93e453477d9438e10000000a44176d/content.htm?frameset=/en/e2/cde153cafa9117e10000000a44176d/frameset.htm&current_toc=/en/b7/8ee25341d61e4ee10000000a423f68/plain.htm&node_id=18"},e);},getUnifiedShellInstance:function(){return this.unifiedShell;},setUnifiedShellInstance:function(u){this.unifiedShell=u;},subscribeNavigationEvents:function(){var b=sap.ui.getCore().getEventBus();b.subscribe("navInMaster","to",jQuery.proxy(this.navInMaster_To,this));b.subscribe("navInDetail","to",jQuery.proxy(this.navInDetail_To,this));b.subscribe("navInDetail","back",jQuery.proxy(this.navInDetail_Back,this));b.subscribe("navInMaster","back",jQuery.proxy(this.navInMaster_Back,this));},getViewRegistry:function(){return[{"from":"MyContactsMaster","to":"MyContactDetails"},{"from":"MyContactDetails","to":"NewContactRegistrationDetail"},{"from":"MyContactsActionSheet","to":"NewContactRegistrationDetail"},{"from":"NewContactRegistrationDetail","to":"MyContactDetails"}];},navInMaster_To:function(E,d,D){var f="";try{if(typeof d==="string"&&typeof D==="object"){f=D.from.sId;if(!D.data){D.data=null;}if(f&&typeof f==="string"){var t=this.getSplViewsRegistry(D.from.sId);if(t&&typeof t==="string"){this.oSplitAppBase.toMaster(t,"fade",D.data);}else{throw new Error();}}else{throw new Error();}}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},navInDetail_To:function(E,d,D){var f="";try{if(typeof d==="string"&&typeof D==="object"){f=D.from.sId;if(!D.data){D.data=null;}if(f&&typeof f==="string"){var t=this.getSplViewsRegistry(D.from.sId);if(t&&typeof t==="string"){this.oSplitAppBase.toDetail(t,"fade",D.data);}else{throw new Error();}}else{throw new Error();}}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},navInDetail_Back:function(E,d,D){if(!D.data){D.data=null;}try{if(d&&typeof d==="string"){this.oSplitAppBase.backDetail(D.data);}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},navInMaster_Back:function(E,d,D){if(!D.data){D.data=null;}try{if(d&&typeof d==="string"){this.oSplitAppBase.backMaster(D.data);}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},getSplViewsRegistry:function(v){var _=null;try{if(v&&typeof v==="string"){if(this.aSplViewsRegistry!==undefined){for(var i=0,j=this.aSplViewsRegistry.length;i<j;i++){if(this.aSplViewsRegistry[i].from===v){if(this.aSplViewsRegistry[i].to){_=this.aSplViewsRegistry[i].to;}else{throw new Error();}}}}else{throw new Error();}}else{throw new Error();}return _;}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"View ID is not a string",this.getView().getControllerName());}}}});
