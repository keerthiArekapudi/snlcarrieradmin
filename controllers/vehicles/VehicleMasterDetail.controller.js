/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.controller("splController.vehicles.VehicleMasterDetail",{onInit:function(){var t=this;this.oMyVehiclesSplitApp=this.getView().byId("SapSplVehicleMasterDetailSplitApp");this.aSplViewsRegistry=this.getViewRegistry();this.subscribeNavigationEvents();this.instantiatePages();this.setInitialState();oSapSplUtils.setSplitAppBaseVehicle(this);this.getView().addEventDelegate({onAfterShow:function(){t.oMyVehiclesSplitApp.getCurrentMasterPage().byId("sapSplVehicleSearch").focus();}});},subscribeNavigationEvents:function(){var b=sap.ui.getCore().getEventBus();b.subscribe("navInMasterVehicle","to",jQuery.proxy(this.navInMasterVehicle_To,this));b.subscribe("navInDetailVehicle","to",jQuery.proxy(this.navInDetailVehicle_To,this));b.subscribe("navInDetailVehicle","back",jQuery.proxy(this.navInDetailVehicle_Back,this));b.subscribe("navInMasterVehicle","back",jQuery.proxy(this.navInMasterVehicle_Back,this));},setInitialState:function(){try{if(this.oMyVehiclesSplitApp){this.oMyVehiclesSplitApp.setInitialMaster("MyVehiclesMaster");this.oMyVehiclesSplitApp.setInitialDetail("MyVehiclesDetail");if(jQuery.sap.getUriParameters().get("navToHome")&&jQuery.sap.getUriParameters().get("navToHome")==="true"){oSapSplUtils.showHeaderButton({showButton:true,sNavToPage:"splView.tileContainer.MasterTileContainer"});}}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"MyVehicles SplitApp not defined",this.getView().getControllerName());}}},instantiatePages:function(){splReusable.libs.SapSplStyleSheetLoader.loadStyle("./resources/styles/splVehicles");var m=null,a=null,b=null;m=sap.ui.view({id:"MyVehiclesMaster",viewName:"splView.vehicles.MyVehiclesMaster",type:sap.ui.core.mvc.ViewType.XML,viewData:this.getView()});b=sap.ui.view({id:"MyVehiclesDetail",viewName:"splView.vehicles.MyVehiclesDetail",type:sap.ui.core.mvc.ViewType.XML});a=sap.ui.view({id:"MyVehiclesDetailAddVehicle",viewName:"splView.vehicles.MyVehiclesDetailAddVehicle",type:sap.ui.core.mvc.ViewType.XML});m.addEventDelegate({onBeforeShow:jQuery.proxy(m.getController().onBeforeShow,m.getController())});b.addEventDelegate({onBeforeShow:jQuery.proxy(b.getController().onBeforeShow,b.getController())});a.addEventDelegate({onBeforeShow:jQuery.proxy(a.getController().onBeforeShow,a.getController())});try{if(this.oMyVehiclesSplitApp){this.oMyVehiclesSplitApp.addMasterPage(m);this.oMyVehiclesSplitApp.addDetailPage(b);this.oMyVehiclesSplitApp.addDetailPage(a);}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"SplitApp not defined",this.getView().getControllerName());}}window.setTimeout(function(){oSapSplBusyDialog.getBusyDialogInstance().close();},10);},getViewRegistry:function(){return[{"from":"MyVehiclesMaster","to":"MyVehiclesDetail"},{"from":"MyVehiclesDetail","to":"MyVehiclesDetailAddVehicle"},{"from":"MyVehiclesMaster--SapSplAddNewTruck","to":"MyVehiclesDetailAddVehicle"},{"from":"MyVehiclesDetailAddVehicle","to":"MyVehiclesDetail"}];},navInMasterVehicle_To:function(E,d,D){var f="";try{if(typeof d==="string"&&typeof D==="object"){f=D.from.sId;if(!D.data){D.data=null;}if(f&&typeof f==="string"){var t=this.getSplViewsRegistry(D.from.sId);if(t&&typeof t==="string"){this.oMyVehiclesSplitApp.toMaster(t,"fade",D.data);}else{throw new Error();}}else{throw new Error();}}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},navInDetailVehicle_To:function(E,d,D){var f="";try{if(typeof d==="string"&&typeof D==="object"){f=D.from.sId;if(!D.data){D.data=null;}if(f&&typeof f==="string"){var t=this.getSplViewsRegistry(D.from.sId);if(t&&typeof t==="string"){this.oMyVehiclesSplitApp.toDetail(t,"fade",D.data);}else{throw new Error();}}else{throw new Error();}}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},navInDetailVehicle_Back:function(E,d,D){if(!D.data){D.data=null;}try{if(d&&typeof d==="string"){this.oMyVehiclesSplitApp.backDetail(D.data);}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},navInMasterVehicle_Back:function(E,d,D){if(!D.data){D.data=null;}try{if(d&&typeof d==="string"){this.oMyVehiclesSplitApp.backMaster(D.data);}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Parameters for navigation not in proper format",this.getView().getControllerName());}}},getSplViewsRegistry:function(v){var _=null;try{if(v&&typeof v==="string"){if(this.aSplViewsRegistry!==undefined){for(var i=0,j=this.aSplViewsRegistry.length;i<j;i++){if(this.aSplViewsRegistry[i].from===v){if(this.aSplViewsRegistry[i].to){_=this.aSplViewsRegistry[i].to;}else{throw new Error();}}}}else{throw new Error();}}else{throw new Error();}return _;}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"View ID is not a string",this.getView().getControllerName());}}},onBeforeShow:function(e){var v=null;sap.ui.getCore().getModel("myVehiclesListODataModel").refresh();this.setCurrentAppInfo(e);this.appID="vehicles";sap.ui.getCore().getModel("sapSplAppConfigDataModel").setData(oSapSplUtils.getAppConfigObjectFromAllowedTiles(this.appID)[0]);if(sap.ui.getCore().getModel("SapSplMyVehicleDetailModel")&&this.oMyVehiclesSplitApp){this.oMyVehiclesSplitApp.toDetail("MyVehiclesDetail");var m=sap.ui.getCore().getModel("SapSplMyVehicleDetailModel").getData();m["isClicked"]=false;m["noData"]=true;m["showFooterButtons"]=false;m["isEdit"]=false;m["isEditable"]=false;sap.ui.getCore().getModel("SapSplMyVehicleDetailModel").setData(m);}if(e.data&&e.data["FromApp"]==="profile"||e.data["FromApp"]==="Notifications"){v=e.data["RegistrationNumber"];}this.byId("SapSplVehicleMasterDetailSplitApp").getMasterPages()[0].getController().fnHandleNavigationSearch(v);},setCurrentAppInfo:function(e){oSapSplHelpHandler.setAppHelpInfo({iUrl:"./help/SCLTrucks.pdf",eUrl:"//help.sap.com/saphelp_scl10/helpdata/en/e2/cde153cafa9117e10000000a44176d/content.htm?frameset=/en/a6/92e453477d9438e10000000a44176d/frameset.htm&current_toc=/en/b7/8ee25341d61e4ee10000000a423f68/plain.htm&node_id=15&show_children=false"},e);},onAfterRendering:function(){}});
