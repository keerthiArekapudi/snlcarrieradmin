/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.require("sap.ui.core.util.Export");jQuery.sap.require("sap.ui.core.util.ExportTypeCSV");jQuery.sap.require("sap.ui.comp.filterbar.FilterBar");sap.ui.controller("splController.communicationLog.communicationLog",{onInit:function(){this.oResponseCodeObject={};this.oServicePathsObject={};this.selectedTime=[];this.selectedResponseCode=[];this.selectedDirection=[];this.selectedServicePaths=[];this.customDate1=null;this.customDate2=null;var t=this,n=new Date();var d={time:this.getTimeHorizonEnum(),direction:this.getDirectionEnum(),responseCodes:[]};this.byId("timeHorizonSelect").addEventDelegate({onAfterRendering:function(e){e.srcControl.$().on("focusout",function(e){e.stopPropagation();});}});this.sapSplCommunicationLogModel=new sap.ui.model.json.JSONModel(d);this.byId("filterBar").setModel(this.sapSplCommunicationLogModel);sap.ui.getCore().getModel("CommunicationLogODataModel").attachRequestCompleted(function(){t.byId("SapSplCommunicationLogTable").setBusy(false);});sap.ui.getCore().getModel("CommunicationLogODataModel").attachRequestFailed(function(){t.byId("SapSplCommunicationLogTable").setBusy(false);});function o(T){t.byId("sapSplCommunicationLogLoggedEvents").setText(oSapSplUtils.getBundle().getText("LOGGED_EVENTS",T.getItems().length.toString()));if(T.getItems().length===0){t.oResponseCodeObject={};t.oServicePathsObject={};t.byId("sapSplComLogDelete").setEnabled(false);}else{t.byId("sapSplComLogDelete").setEnabled(true);}var r=[],s=[],m=null;jQuery.each(t.oResponseCodeObject,function(k,v){r.push({value:v,value_description:k});});jQuery.each(t.oServicePathsObject,function(k){s.push({value:k,value_description:k});});m=t.sapSplCommunicationLogModel.getData();m.responseCodes=r;m.servicePaths=s;t.sapSplCommunicationLogModel.setData(m);}this.byId("SapSplCommunicationLogTable").setModel(sap.ui.getCore().getModel("CommunicationLogODataModel"));this.byId("SapSplCommunicationLogTable").getBinding("items").sort(new sap.ui.model.Sorter("StartTime",true));this.byId("SapSplCommunicationLogTable").getBinding("items").filter(new sap.ui.model.Filter("StartTime",sap.ui.model.FilterOperator.GT,"datetime'"+(new Date(n.setMinutes(n.getMinutes()-10)))+"'"));sap.ui.getCore().getModel("CommunicationLogODataModel").attachRequestCompleted(function(){o(t.byId("SapSplCommunicationLogTable"));});this.byId("SapSplCommunicationLogTable").addEventDelegate({onAfterRendering:function(e){o(e.srcControl);}});this.byId("SapSplCommunicationLogTableListItem").addEventDelegate({onAfterRendering:function(e){e.srcControl.getParent().setBusy(false);if(e.srcControl.getBindingContext()){if(e.srcControl.getParent().indexOfItem(e.srcControl)===0){t.oResponseCodeObject={};t.oServicePathsObject={};}var r=e.srcControl.getBindingContext().getProperty().ResponseCode;var p=e.srcControl.getBindingContext().getProperty().Package;var s=e.srcControl.getBindingContext().getProperty().StartTime_1;var T=t.oResponseCodeObject[r];if(T===undefined){T=s;}else{if(new Date(T).getTime()>new Date(s).getTime()){T=s;}}t.oResponseCodeObject[r]=T;t.oServicePathsObject[p]={};if(e.srcControl.getParent().indexOfItem(e.srcControl)===e.srcControl.getParent().getItems().length-1){o(e.srcControl.getParent());}}}});this.byId("filterBar").addEventDelegate({onAfterRendering:function(){$(".sapSplServicesPathMultiInput").parent().parent().css("width","40%");var b=$(".communicationLogFilterBar .sapUiCompFilterBarToolbar").find(".sapMBtn").length;$(".communicationLogFilterBar .sapUiCompFilterBarToolbar").find(".sapMBtn").css("display","none");$($(".communicationLogFilterBar .sapUiCompFilterBarToolbar").find(".sapMBtn")[0]).css("display","block");$($(".communicationLogFilterBar .sapUiCompFilterBarToolbar").find(".sapMBtn")[b-1]).css("display","block");}});this.sSelectedTimeHorizon="10";this.instantiatePersoService();this.mGroupFunctions={Direction:function(c){var D=c.getProperty("Direction");if(D==="O"){return{text:oSapSplUtils.getBundle().getText("OUTBOUND_DIRECTION"),key:D};}else{return{text:oSapSplUtils.getBundle().getText("INBOUND_DIRECTION"),key:D};}},Object:function(c){var O=c.getProperty("Object");return{text:O,key:O};},ResponseCode:function(c){var r=c.getProperty("ResponseCode");return{text:r,key:r};}};this.getView().addEventDelegate({onAfterShow:function(){window.setTimeout(function(){t.getView().byId("timeHorizonSelect").focus();},100);}});},onBeforeShow:function(e){var n="",g="",m=null;n=jQuery.sap.getUriParameters().get("navToHome");g=jQuery.sap.getUriParameters().get("goto");m=this.byId("sapSplCommunicationLogPage");this.setCurrentAppInfo(e);if(g){if(n&&n==="false"){m.setShowNavButton(false);}else if(n&&n==="true"){m.setShowNavButton(true);oSapSplUtils.showHeaderButton({showButton:true,sNavToPage:"splView.tileContainer.MasterTileContainer"});}else{m.setShowNavButton(false);}}else{m.setShowNavButton(true);}},setCurrentAppInfo:function(e){oSapSplHelpHandler.setAppHelpInfo({iUrl:"./help/SCLComLog.pdf",eUrl:"./help/SCLComLog.pdf"},e);},instantiatePersoService:function(){var p={oPersoData:{_persoSchemaVersion:"1.0",aColumns:[]},getPersData:function(){var d=new jQuery.Deferred();if(!this._oBundle){this._oBundle=this.oPersoData;}var b=this._oBundle;d.resolve(b);return d.promise();},setPersData:function(b){var d=new jQuery.Deferred();this._oBundle=b;d.resolve();return d.promise();}};var t=this.byId("SapSplCommunicationLogTable");jQuery.sap.require("sap.m.TablePersoController");this.oTablePersoDialog=new sap.m.TablePersoController({table:t,persoService:p}).activate();},getTimeHorizonEnum:function(){return[{value:"10",value_description:oSapSplUtils.getBundle().getText("LAST_10_MINUTES")},{value:"60",value_description:oSapSplUtils.getBundle().getText("LAST_HOUR")},{value:"360",value_description:oSapSplUtils.getBundle().getText("LAST_6_HOURS")},{value:"1440",value_description:oSapSplUtils.getBundle().getText("LAST_DAY")},{value:"10080",value_description:oSapSplUtils.getBundle().getText("LAST_WEEK")},{value:"Manual",value_description:oSapSplUtils.getBundle().getText("MANUAL_SELECTION")}];},getDirectionEnum:function(){return[{value:"All",value_description:oSapSplUtils.getBundle().getText("FILTER_LABEL_ALL")},{value:"I",value_description:oSapSplUtils.getBundle().getText("INBOUND_DIRECTION")},{value:"O",value_description:oSapSplUtils.getBundle().getText("OUTBOUND_DIRECTION")}];},handleSearchBasedOnFilters:function(e){var f=e.getParameters().selectionSet,F="$filter=",n=new Date(),t=null,r=null,s=null,d=null;this.byId("sapSplCommunicationLogSearchField").setValue("");this.selectedTime=[];this.selectedResponseCode=[];this.selectedDirection=[];this.selectedServicePaths=[];t=f[0].getSelectedItem().getBindingContext().getProperty();d=f[1].getSelectedItem().getBindingContext().getProperty();r=f[2].getSelectedItems();s=f[3].getTokens();if(t.value==="customRange"){if(this.customDate1.getTime()!==this.customDate2.getTime()){F+="StartTime gt datetime'"+(this.customDate1.toJSON())+"' and ";F+="StartTime lt datetime'"+(this.customDate2.toJSON())+"' and ";this.selectedTime.push(this.customDate1.toJSON());this.selectedTime.push(this.customDate2.toJSON());}else{F+="StartTime gt datetime'"+new Date(this.customDate1.setHours("0")).toJSON()+"' and ";F+="StartTime lt datetime'"+new Date(this.customDate2.setHours("24")).toJSON()+"' and ";this.selectedTime.push(new Date(this.customDate1.setHours("0")).toJSON());this.selectedTime.push(new Date(this.customDate2.setHours("24")).toJSON());}}else{F+="StartTime gt datetime'"+(new Date(n.setMinutes(n.getMinutes()-t.value))).toJSON()+"' and ";this.selectedTime.push(new Date(n.setMinutes(n.getMinutes()-t.value)).toJSON());}if(d.value==="All"){F+="(Direction eq 'I' or Direction eq 'O')";}else{F+="Direction eq '"+d.value+"'";this.selectedDirection.push(d.value);}if(r.length>0){var R=[];F+=" and (";for(var i=0;i<r.length;i++){R.push("(ResponseCode eq "+r[i].getBindingContext().getProperty().value_description+")");this.selectedResponseCode.push(r[i].getBindingContext().getProperty().value_description);}F+=R.join(" or ")+")";}if(s.length>0){var S=[];F+=" and (";for(var j=0;j<s.length;j++){S.push("(Package eq \'"+s[j].getText()+"\')");this.selectedServicePaths.push(s[j].getText());}F+=S.join(" or ")+")";}this.byId("SapSplCommunicationLogTable").setBusy(true);this.byId("SapSplCommunicationLogTable").getBinding("items").sFilterParams=F;sap.ui.getCore().getModel("CommunicationLogODataModel").refresh();this.sAppliedFilters=F;this.getView().byId("timeHorizonSelect").focus();},sapSplHandleClickOfCommunicationLogObjectLink:function(e){var c=new sap.ui.layout.form.SimpleForm({content:[new sap.m.Label({text:oSapSplUtils.getBundle().getText("REQUEST"),design:"Bold"}),new sap.m.Text({text:"{/Request}",wrapping:true}),new sap.m.Label({text:oSapSplUtils.getBundle().getText("REQUEST_HEADER"),design:"Bold"}),new sap.m.Text({text:"{/RequestHeaders}",wrapping:true}),new sap.m.Label({text:oSapSplUtils.getBundle().getText("RESPONSE"),design:"Bold"}),new sap.m.Text({text:"{/Response}",wrapping:true}),new sap.m.Label({text:oSapSplUtils.getBundle().getText("RESPONSE_HEADER"),design:"Bold"}),new sap.m.Text({text:"{/ResponseHeaders}",wrapping:true})]}).setModel(new sap.ui.model.json.JSONModel(e.getSource().getBindingContext().getProperty()));new sap.m.ResponsivePopover({title:e.getSource().getBindingContext().getProperty().Object,placement:"Auto",content:new sap.ui.layout.VerticalLayout().setWidth("320px").addContent(c),contentHeight:"375px",contentWidth:"320px"}).openBy(e.getSource());},handleCreationOfCustomDateRange:function(e){var t=[],d=null,m={},c=false;d=e.getSource().getParent().getParent().getContent()[0].getContent()[1];this.customDate1=d.getDateValue();this.customDate2=d.getSecondDateValue();m=this.sapSplCommunicationLogModel.getData();t=m.time;if(this.customDate1===null||this.customDate2===null){d.setValueState("Error");d.setValueStateText(oSapSplUtils.getBundle().getText("CUSTOM_RANGE_DATE_ERROR_STATE_TEXT"));}else{d.setValueState("None");for(var i=0;i<t.length;i++){if(t[i].value==="customRange"){c=true;t[i].value_description=d.getValue();break;}}if(c===false){t.push({value:"customRange",value_description:d.getValue()});}m["time"]=t;this.sapSplCommunicationLogModel.setData(m);this.byId("timeHorizonSelect").setSelectedKey("customRange");this.sSelectedTimeHorizon="customRange";e.getSource().getParent().close();e.getSource().getParent().destroy();}},onPersoButtonPressed:function(){var t=this;this.oTablePersoDialog.mAggregations._tablePersoDialog._oDialog.attachAfterClose(function(){t.getView().byId("timeHorizonSelect").focus();});this.oTablePersoDialog.mAggregations._tablePersoDialog._oDialog.removeStyleClass("sapUiPopupWithPadding");this.oTablePersoDialog.openDialog();},onSortButtonPressed:function(e){var t=this,s=null;if(!this._oDialog){this._oDialog=new sap.m.ViewSettingsDialog("oSapSplSortFilterDialog",{title:oSapSplUtils.getBundle().getText("VIEW"),sortDescending:true,sortItems:[new sap.m.ViewSettingsItem({text:oSapSplUtils.getBundle().getText("START_TIME"),key:"StartTime",selected:true}),new sap.m.ViewSettingsItem({text:oSapSplUtils.getBundle().getText("END_TIME"),key:"EndTime"})],groupItems:[new sap.m.ViewSettingsItem({text:oSapSplUtils.getBundle().getText("OBJECT"),key:"Object"}),new sap.m.ViewSettingsItem({text:oSapSplUtils.getBundle().getText("DIRECTION"),key:"Direction"}),new sap.m.ViewSettingsItem({text:oSapSplUtils.getBundle().getText("RESPONSE_CODE"),key:"ResponseCode"})],confirm:function sortOrGroup(e){var v=t.getView();var T=v.byId("SapSplCommunicationLogTable");var p,d;var P=e.getParameters();var b=T.getBinding("items");var S=[];if(P.groupItem){p=P.groupItem.getKey();d=P.groupDescending;var g=t.mGroupFunctions[p];S.push(new sap.ui.model.Sorter(p,d,g));}p=P.sortItem.getKey();d=P.sortDescending;S.push(new sap.ui.model.Sorter(p,d));b.sort(S);t.getView().byId("timeHorizonSelect").focus();},cancel:function(){t.getView().byId("timeHorizonSelect").focus();}},this);}this.getView().addDependent(this._oDialog);this._oDialog.open();s=e.getSource().getTooltip();if(s===oSapSplUtils.getBundle().getText("SORTBY_BUTTON_TOOLTIP")){this._oDialog._getSortButton().firePress();}else if(s===oSapSplUtils.getBundle().getText("GROUPBY_BUTTON_TOOLTIP")){this._oDialog._getGroupButton().firePress();}},fnHandleBackNavigation:function(){var b=null;b=oSplBaseApplication.getAppInstance();if(b.getPreviousPage()){b.back();}else{b.to("splView.tileContainer.MasterTileContainer");}},openDateRangeSelctionDialog:function(d,D){var t=this,s=null;s={dateValue:d,secondDateValue:D,placeholder:oSapSplUtils.getBundle().getText("DATE_RANGE_PLACEHOLDER"),displayFormat:"dd.MM.yyyy",change:function(e){var v=e.getParameter("valid");var a=e.oSource;if(v){a.setValueState(sap.ui.core.ValueState.None);}else{a.setValueState(sap.ui.core.ValueState.Error);}}};var o=new sap.m.Dialog({title:oSapSplUtils.getBundle().getText("MANUAL_SELECTION"),content:[new sap.ui.layout.form.SimpleForm({content:[new sap.m.Label({text:oSapSplUtils.getBundle().getText("DATE_RANGE")}),new sap.m.DateRangeSelection(s)]})],beginButton:new sap.m.Button({text:oSapSplUtils.getBundle().getText("OK"),press:function(e){if(e.getSource().getParent().getParent().getContent()[0].getContent()[1].getValueState()==="None"){t.handleCreationOfCustomDateRange(e);}}}),endButton:new sap.m.Button({text:oSapSplUtils.getBundle().getText("CANCEL"),press:function(e){e.getSource().getParent().close();e.getSource().getParent().destroy();t.byId("timeHorizonSelect").setSelectedKey(t.sSelectedTimeHorizon);}})});o.open();o.attachAfterOpen(function(e){oSapSplUtils.fnSyncStyleClass(e.getSource());});},handleSelectOfTimeHorizon:function(e){var s=e.getParameters().selectedItem.getBindingContext().getProperty().value;if(s==="Manual"){this.openDateRangeSelctionDialog(this.customDate1,this.customDate2);}else if(e.getParameters().selectedItem.getBindingContext().getProperty().value==="customRange"){this.openDateRangeSelctionDialog(this.customDate1,this.customDate2);this.sSelectedTimeHorizon=s;}else{this.sSelectedTimeHorizon=s;}},fnInstantiateCSVExporter:function(m){this.oExport=new sap.ui.core.util.Export({exportType:new sap.ui.core.util.ExportTypeCSV({separatorChar:","}),models:m,rows:{path:"/"},columns:[{name:oSapSplUtils.getBundle().getText("SERVICE_PATH"),template:{content:{path:"Package"}}},{name:oSapSplUtils.getBundle().getText("OBJECT"),template:{content:{path:"Object"}}},{name:oSapSplUtils.getBundle().getText("DESTINATION_SUFFIX"),template:{content:{path:"DestinationSuffix"}}},{name:oSapSplUtils.getBundle().getText("DIRECTION"),template:{content:{path:"Direction"}}},{name:oSapSplUtils.getBundle().getText("REQUEST"),template:{content:{path:"Request"}}},{name:oSapSplUtils.getBundle().getText("REQUEST_HEADER"),template:{content:{path:"RequestHeaders"}}},{name:oSapSplUtils.getBundle().getText("HTTP_METHOD"),template:{content:{path:"httpMethod"}}},{name:oSapSplUtils.getBundle().getText("RESPONSE_CODE"),template:{content:{path:"ResponseCode"}}},{name:oSapSplUtils.getBundle().getText("RESPONSE"),template:{content:{path:"Response"}}},{name:oSapSplUtils.getBundle().getText("RESPONSE_HEADER"),template:{content:{path:"ResponseHeaders"}}},{name:oSapSplUtils.getBundle().getText("DURATION"),template:{content:{path:"Duration"}}},{name:oSapSplUtils.getBundle().getText("START_TIME"),template:{content:{path:"StartTime"}}},{name:oSapSplUtils.getBundle().getText("END_TIME"),template:{content:{path:"EndTime"}}},{name:oSapSplUtils.getBundle().getText("LOGON_USER"),template:{content:{path:"LogonUser"}}}]});},onColumnListSelected:function(e){var l=e.getSource().getSelectedItems().length;if(l===0){this.byId("sapSplComLogDelete").setEnabled(false);}else{this.byId("sapSplComLogDelete").setEnabled(true);}},fnCreatePayload:function(I){var h=[];for(var i=0;i<I.length;i++){h.push({ChangeMode:"D",UUID:I[i].getBindingContext().getObject()["UUID"]});}return{Header:h,inputHasChangeMode:true};},fnDeleteEvents:function(){var t=this;var p=this.fnCreatePayload(this.byId("SapSplCommunicationLogTable").getSelectedItems());sap.m.MessageBox.show(oSapSplUtils.getBundle().getText("DELETE_EVENTS"),{title:oSapSplUtils.getBundle().getText("WARNING"),icon:sap.m.MessageBox.Icon.WARNING,actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.CANCEL],onClose:function(a){if(a==="YES"){t.fnDeleteLog(p);}}});},fnDeleteLog:function(p){oSapSplAjaxFactory.fireAjaxCall({url:oSapSplUtils.getFQServiceUrl("/sap/spl/xs/app/services/communicationLog.xsjs"),method:"POST",data:JSON.stringify(p),success:function(d,s,m){if(d.constructor===String){d=JSON.parse(d);}oSapSplBusyDialog.getBusyDialogInstance().close();if(m["status"]===200&&d["Error"].length===0){sap.ca.ui.message.showMessageToast(oSapSplUtils.getBundle().getText("DELETE_EVENTS_SUCCESS"));sap.ui.getCore().getModel("CommunicationLogODataModel").refresh();}},error:function(e){jQuery.sap.log.error("fnCreatePayload","ajax failed","communicationLog.controller.js");oSapSplBusyDialog.getBusyDialogInstance().close();sap.ui.getCore().getModel("CommunicationLogODataModel").refresh();if(e&&e["status"]===500){sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:e["status"]+" "+e.statusText,details:e.responseText});}else{sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:oSapSplUtils.getErrorMessagesfromErrorPayload(JSON.parse(e.responseText))["errorWarningString"],details:oSapSplUtils.getErrorMessagesfromErrorPayload(JSON.parse(e.responseText))["ufErrorObject"]});}},complete:function(){}});},fnHandleDownloadAsCSV:function(){var m=new sap.ui.model.json.JSONModel(),M=[];var t=this.byId("SapSplCommunicationLogTable");for(var i=0;i<t.getSelectedItems().length;i++){M.push(t.getSelectedItems()[i].getBindingContext().getProperty());}m.setData(M);var f=null;f=oSapSplUtils.getBundle().getText("COMMUNICATION_LOG_PAGE_TITLE")+"_"+splReusable.libs.SapSplModelFormatters.getDateFromString(new Date());this.fnInstantiateCSVExporter(m);this.oExport.saveFile(f).always(function(){this.destroy();sap.ca.ui.message.showMessageToast(oSapSplUtils.getBundle().getText("EVENTS_DOWNLOAD_SUCCESS",M.length));});},callSearchService:function(p){var s=this.getView().byId("SapSplCommunicationLogTable"),S=[],o={};$.ajax({url:oSapSplUtils.getFQServiceUrl("/sap/spl/xs/app/services/Search.xsjs"),type:"POST",contentType:"json; charset=UTF-8",async:false,beforeSend:function(r){r.setRequestHeader("X-CSRF-Token",oSapSplUtils.getCSRFToken());r.setRequestHeader("Cache-Control","max-age=0");},data:JSON.stringify(p),success:function(d,a,m){oSapSplBusyDialog.getBusyDialogInstance().close();if(d.constructor===String){d=JSON.parse(d);}if(m["status"]===200){if(d.length>0){o=oSapSplUtils.getSearchItemFilters(d,"UUID");if(o.aFilters.length>0){S.push(o);}s.getBinding("items").filter(S);}}else if(d["Error"]&&d["Error"].length>0){var e=oSapSplUtils.getErrorMessagesfromErrorPayload(d)["ufErrorObject"];sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:oSapSplUtils.getErrorMessagesfromErrorPayload(d)["errorWarningString"],details:e});}},error:function(e){oSapSplBusyDialog.getBusyDialogInstance().close();if(e&&e["status"]===500){sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:e["status"]+"\t"+e.statusText,details:e.responseText});}else{sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:oSapSplUtils.getErrorMessagesfromErrorPayload(JSON.parse(e.responseText))["errorWarningString"],details:oSapSplUtils.getErrorMessagesfromErrorPayload(JSON.parse(e.responseText))["ufErrorObject"]});}},complete:function(){s.setBusy(false);}});},prepareSearchPayload:function(s){var p={};p.UserID=oSapSplUtils.getLoggedOnUserDetails().profile.UserID;p.ObjectType="CommunicationLog";p.SearchTerm=s;p.FuzzinessThershold=SapSplEnums.fuzzyThreshold;p.MaximumNumberOfRecords=SapSplEnums.numberOfRecords;p.ProvideDetails=false;if(this.selectedResponseCode.length>0||this.selectedTime.length>0||this.selectedServicePaths.length>0||this.selectedDirection.length>0){p.AdditionalCriteria={};}if(this.selectedResponseCode.length>0){p.AdditionalCriteria.ResponseCode=this.selectedResponseCode;}if(this.selectedTime.length>0){if(this.selectedTime.length===1){p.AdditionalCriteria.StartTimeRange=this.selectedTime[0];}else{p.AdditionalCriteria.StartTimeRange=this.selectedTime;}}if(this.selectedServicePaths.length>0){p.AdditionalCriteria.Package=this.selectedServicePaths;}if(this.selectedDirection.length>0){p.AdditionalCriteria.Direction=this.selectedDirection;}return p;},handleSearch:function(e){var s=e.getParameters().query;var S;var p;S=this.getView().byId("SapSplCommunicationLogTable");if(s.length>2){p=this.prepareSearchPayload(s);S.setBusy(true);this.callSearchService(p);}else if(S.getBinding("items")===undefined||(S.getBinding("items").sFilterParams!==undefined&&S.getBinding("items").sFilterParams.length>1)){if(this.sAppliedFilters===undefined){this.sAppliedFilters="";}S.getBinding("items").sFilterParams=this.sAppliedFilters;sap.ui.getCore().getModel("CommunicationLogODataModel").refresh();}}});
