/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.controller("splController.tileContainer.MasterTileContainer",{onInit:function(){var m=new sap.ui.model.json.JSONModel(),p="__tile0-splView.tileContainer.MasterTileContainer--masterTileContainerPage-",_=oSapSplUtils.getAllowedTilesList();this.getView().setModel(m);this.getView().addEventDelegate({onBeforeShow:function(e){this.onBeforeShow(e);}},this);m.setData({results:_});oSapSplTileRefresher.oTileModel=m;for(var c=0;c<_.length;c++){oSapSplTileRefresher.resultVisualizerFactory(_[c].AppID,p,c,m,_[c]);}jQuery.sap.log.info("Master Container Initializer","Result Visualizer Factory executed","SAPSCL");this.bIsTilePressed=true;this.byId("masterTileContainerPage").setShowFooter(window.location.search.indexOf("spl-show-log=1")>-1);if(jQuery.sap.getUriParameters().get("goto")){oSapSplQuerySelectors.getInstance().changeUnifiedShellStyle(false);}else{oSapSplQuerySelectors.getInstance().changeUnifiedShellStyle(true);}},onBeforeShow:function(e){oSapSplHelpHandler.setAppHelpInfo({iUrl:"./help/SCLLaunchpad.pdf",eUrl:"http://help.sap.com/saphelp_scl10/helpdata/en/c9/50e853c0bb9438e10000000a44176d/content.htm?frameset=/en/54/ec1054b76b8b24e10000000a4450e5/frameset.htm&current_toc=/en/b7/8ee25341d61e4ee10000000a423f68/plain.htm&node_id=7"},e);},getData:function(u,s,e){oSapSplAjaxFactory.fireAjaxCall({url:u,method:"GET",dataType:"json",success:function(r){s(r);},error:function(x,t,a){e(x,t,a);}});},fetchCompanyDetailsOfLoggedInUser:function(){this.oSapSplMyContactModel.read("/MyOrganization",null,null,true,jQuery.proxy(this.fnSuccessOfCompanyData,this),jQuery.proxy(this.fnFailOfCompanyData,this));},fnSuccessOfCompanyData:function(r){oSapSplUtils.setCompanyDetails(r.results[0]);},fnFailOfCompanyData:function(){},onBeforeRendering:function(){},onAfterRendering:function(){oSapSplBusyDialog.getBusyDialogInstance({type:"fiori"}).close();},onExit:function(){},handleSplMasterTileContainerTileMoveEvent:function(e){jQuery.sap.log.info(e.toString());e.preventDefault();},handleSplStandardTilePressEvent:function(e){if(e.getSource().getBindingContext().getProperty("state")===undefined||e.getSource().getBindingContext().getProperty("state").toLowerCase()==="failed"){e.preventDefault();sap.ca.ui.message.showMessageBox({type:sap.ca.ui.message.Type.ERROR,message:oSapSplUtils.getBundle().getText("TILE_CANNOT_BE_LOADED")},function(){});return;}this.oEvent=e;oSapSplUtils.showHeaderButton({showButton:true,sNavToPage:"splView.tileContainer.MasterTileContainer",navIcon:"sap-icon://home"});function l(e){jQuery.sap.log.info(e.toString());this.oBaseView=null;if(!sap.ui.getCore().byId("sapSplBaseApplication").getPage((e.getSource().getBindingContext().getProperty().AppPath))){this.oBaseView=sap.ui.view({viewName:e.getSource().getBindingContext().getProperty().AppPath,id:e.getSource().getBindingContext().getProperty().AppPath,type:sap.ui.core.mvc.ViewType.XML,viewData:e.getSource().getBindingContext()});this.oBaseView.addEventDelegate({onBeforeShow:jQuery.proxy(this.oBaseView.getController().onBeforeShow,this.oBaseView.getController())},this.oBaseView.getController());if(this.oBaseView.getController().onAfterShow){this.oBaseView.addEventDelegate({onAfterShow:jQuery.proxy(this.oBaseView.getController().onAfterShow,this.oBaseView.getController())},this.oBaseView.getController());}sap.ui.getCore().byId("sapSplBaseApplication").addPage(this.oBaseView);}oSplBaseApplication.getAppInstance().to(e.getSource().getBindingContext().getProperty().AppPath,"slide",{data:e.getSource().getBindingContext().getProperty().AppName,context:e.getSource().getBindingContext()});}window.setTimeout(l(e),20);},refreshTiles:function(){oSapSplTileRefresher.refreshAllTiles();}});
