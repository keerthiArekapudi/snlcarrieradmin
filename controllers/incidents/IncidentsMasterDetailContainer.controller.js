/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.controller("splController.incidents.IncidentsMasterDetailContainer",{onInit:function(){var t=this;this.oSplitApp=this.getView().byId("SapSplIncidentSplitApp");this.instantiatePages();this.setInitialState();this.fnDefineControlLabelsFromLocalizationBundle();this.getView().addEventDelegate({onAfterShow:function(){setTimeout(function(){t.oSplitApp.getCurrentMasterPage().byId("sapSplIncidentSearch").focus();},1000);}});},instantiatePages:function(){var i=null,I=null;I=sap.ui.view({id:"IncidentsMasters",viewName:"splView.incidents.IncidentsMasterView",type:sap.ui.core.mvc.ViewType.XML,viewData:this.getView()});i=sap.ui.view({id:"IncidentsDetails",viewName:"splView.incidents.IncidentsDetailView",type:sap.ui.core.mvc.ViewType.XML});i.addEventDelegate({onBeforeShow:jQuery.proxy(i.getController().onBeforeShow,i.getController())});I.getController().setSplitAppInstance(this.oSplitApp);splReusable.libs.SapSplStyleSheetLoader.loadStyle("./resources/styles/splIncidents","css");try{if(this.oSplitApp){this.oSplitApp.addMasterPage(I);this.oSplitApp.addDetailPage(i);}else{throw new Error();}}catch(e){if(e instanceof Error){jQuery.sap.log.error(e.message,"Cannot access SplitApp Control in Incidents.",this.getView().getControllerName());}}},setInitialState:function(){try{if(this.oSplitApp){this.oSplitApp.setInitialDetail("IncidentsMasters");this.oSplitApp.setInitialDetail("IncidentsDetails");if(jQuery.sap.getUriParameters().get("navToHome")&&jQuery.sap.getUriParameters().get("navToHome")==="true"){oSapSplUtils.showHeaderButton({showButton:true,sNavToPage:"splView.tileContainer.MasterTileContainer"});}}else{throw new Error();}}catch(e){if(e.constructor===Error()){jQuery.sap.log.error(e.message,"SplitApp control not instantiated for Incidents",this.getView().getControllerName());}}},fnDefineControlLabelsFromLocalizationBundle:function(){},onBeforeShow:function(e){sap.ui.getCore().getModel("IncidentsListODataModel").refresh();this.setCurrentAppInfo(e);if(sap.ui.getCore().getModel("SapSplIncidentsDetailModel")&&this.oSplitApp){this.oSplitApp.toDetail("IncidentsDetails");var m=sap.ui.getCore().getModel("SapSplIncidentsDetailModel").getData();m["isClicked"]=false;m["noData"]=true;sap.ui.getCore().getModel("SapSplIncidentsDetailModel").setData(m);}},setCurrentAppInfo:function(e){oSapSplHelpHandler.setAppHelpInfo({iUrl:"./help/SCLIncidents.pdf",eUrl:"//help.sap.com/saphelp_scl10/helpdata/en/a6/92e453477d9438e10000000a44176d/content.htm?frameset=/en/ef/cce153cafa9117e10000000a44176d/frameset.htm&current_toc=/en/b7/8ee25341d61e4ee10000000a423f68/plain.htm&node_id=13&show_children=false"},e);}});
