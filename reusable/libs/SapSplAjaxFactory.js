/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.declare("splReusable.libs.SapSplAjaxFactory");jQuery.sap.require("sap.ca.ui.message.message");var oSapSplAjaxFactory=(function(){var a=oSapSplBusyDialog.getBusyDialogInstance({title:oSapSplUtils.getBundle().getText("BUSY_DIALOG_MESSAGE")});var s=[{name:"url",isMandatory:true},{name:"async",isMandatory:false,def:true},{name:"cache",isMandatory:false,def:false},{name:"method",isMandatory:true},{name:"data",isMandatory:false},{name:"timeout",isMandatory:false,def:10000},{name:"contentType",isMandatory:false,def:"application/json; charset=UTF-8"},{name:"dataType",isMandatory:false,def:"json"},{name:"beforeSend",isMandatory:false,type:"function"},{name:"success",isMandatory:false,type:"function"},{name:"error",isMandatory:false,type:"function"},{name:"complete",isMandatory:false,type:"function"},{name:"handleBusyIndicator",isMandatory:false,def:true}];var m=true;var M=true;var S=["GET","POST","PUT","DELETE"];function c(o){for(var e in S){if(o["method"]&&(o["method"].toString().toUpperCase()===S[e])){M=true;break;}}if(M!==true){$.sap.log.error("Data Access Library","AJAX Method not supported"+o["method"],"SapSplAjaxFactory");}else{return M;}}function b(o){for(var e in s){if(s[e].isMandatory){if(!o[s[e].name]){if(s[e].name==="method"){continue;}m=false;break;}}}if(m!==true){$.sap.log.error("Data Access Library","Mandatory Paramater not passed"+s[e].name," SapSplAjaxFactory");}else{return m;}}function d(o){var e={};for(var i in s){if(s[i].def!==undefined){e[s[i].name]=s[i].def;}}$.each(o,function(k,v){e[k]=v;});if(!o["beforeSend"]){e["beforeSend"]=function(x){x.setRequestHeader("X-CSRF-Token",oSapSplUtils.getCSRFToken());x.setRequestHeader("Content-Type","application/json; charset=UTF-8");};}else{e["beforeSend"]=function(x){x.setRequestHeader("Content-Type","application/json; charset=UTF-8");o["beforeSend"](x);};}e["success"]=function(f,g,h){if(o["success"]){o["success"](f,g,h);}};e["error"]=function(x,t,f){if(o["error"]){o["error"](x,t,f);}};e["complete"]=function(x){if(o["complete"]){o["complete"](x);}a.close();};return e;}function C(o){var A={};if(o["type"]){o["method"]=o["type"];}if(b(o)&&c(o)){if(o["handleBusyIndicator"]===true){a.open();}A=$.ajax(d(o));}return A;}return{fireAjaxCall:C};})();
