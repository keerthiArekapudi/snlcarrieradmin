/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.declare("splReusable.libs.SapSplAppErrorHandler");jQuery.sap.require("sap.ca.ui.message.message");var oSapSplAppErrorHandler=(function(){var d=null,_=null,D=sap.ca.ui.message.Type.ERROR,p={0:{},1:true,2:{},3:function(){}};function a(f){d=null;_=null;f();}function b(P){for(var k in p){if(p.hasOwnProperty(k)){if(P[k]!==null){if(p[k].constructor!==P[k].constructor){jQuery.sap.log.error(k+"\n"+P[k]+"\n"+p[k]);}}}}}function c(e,o){sap.ca.ui.message.showMessageBox(d,function(){a(function(){o({m:"Error handler closed"});});});}var s=function(x,i,o,e,f,g){b(arguments);if(!d||d===null){d={type:"",message:"",details:""};}if(x.status===403){oSapSplEventFactory.dispatch("sessiontimeout");return;}if(i&&x.responseJSON&&x.responseJSON.hasOwnProperty("Error")){_=oSapSplUtils.getErrorMessagesfromErrorPayload(x.responseJSON);d.type=_["messageTitle"];d.message=_["errorWarningString"];d.details=_["ufErrorObject"];}else{d.type=D;d.message=oSapSplUtils.getBundle().getText("GENERIC_ERROR_MESSAGE");d.details=JSON.stringify(x.responseText);}c(d,e,f,g);};return{show:s};}());
