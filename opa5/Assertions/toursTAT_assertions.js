/*
 * Copyright (C) 2009-2015 SAP SE or an SAP affiliate company. All rights reserved.
 */
jQuery.sap.declare("OPA5TestScript.Assertions.toursTAT_assertions");jQuery.sap.require("sap.ui.test.Opa5");jQuery.sap.require("sap.ui.test.matchers.PropertyStrictEquals");new sap.ui.test.Opa5.extend("opa5.Assertions.assertions",{iShouldSeeTiles:function(){return this.waitFor({id:"masterTileContainerPage",viewName:"splView.tileContainer.MasterTileContainer",check:function(){return this.getContext().oAppsPage&&this.getContext().oAppsPage.getContent().length>0;},success:function(p){this.getContext().oShell=p.getParent().getParent().getParent().getParent();var P=this.getContext().oAppsPage.getContent();var o={};for(var i=0;i<P.length;i++){o[P[i].getBindingContext().getProperty().AppID]=P[i];}this.getContext().oUIAppsObject=o;ok(p,"Found the apps tiles : "+this.getContext().oAppsPage.getContent().length+" tiles");},errorMessage:"The apps tiles did not contain entries",});},iShouldSeeIconTab:function(){return this.waitFor({id:"ToursOverview--idIconTabBar",success:function(i){ok(true,"IconTab Bar Visible");},errorMessage:"The icontab bar not loaded",});},iShouldSeeCompletedTourList:function(){return this.waitFor({id:"ToursOverview--SapSplToursOverView",success:function(t){ok(true,"Completed tour list Available");},errorMessage:"Completed tour list is not visible",});},iNavigatetoTourDetails:function(){return this.waitFor({controlType:"sap.suite.ui.commons.BulletChart",check:function(b){var s=b.length;var c=b[s-2].getActual().mProperties.color;var v=b[s-2].getActual().mProperties.value;var t=b[s-2].getTargetValue();var p=b[s-2].getTooltip_AsString().search("Delta");var a=b[s-2].getTooltip_AsString().search("%");var d=parseInt(b[s-2].getTooltip_AsString().substring(p+6,a));var e=Math.abs(v-t);var f=b[s-1].getActual().mProperties.color;var g=b[s-1].getActual().mProperties.value;var h=b[s-1].getTargetValue();var i=b[s-1].getTooltip_AsString().search("Delta");var j=b[s-1].getTooltip_AsString().search("%");var k=parseInt(b[s-1].getTooltip_AsString().substring(i+6,j));var l=Math.abs(g-h);var m;var n;if(v<t){m="Good";}else{m="Error";}if(g<h){n="Good";}else{n="Error";}if(n===f&&m===c&&e===d&&l===k){ok(true,"BulletChart for Max TAT and Min TAT are present and color is correct with correct delta values");return n===f&&m===c&&e===d&&l===k;}else{ok(true,"BulletChart is Present and Color is not correct or delta value is not correct");return n===f&&m===c&&e===d&&l===k;}},success:function(b){ok(true,"Navigation successfull to tour details page");},errorMessage:"Could not navigate to tour details page",});},iNavigatetoTours:function(){return this.waitFor({id:"ToursOverview--idIconTabBar",success:function(i){ok(true,"IconTab Bar Visible and navigated to tours page");},errorMessage:"The icontab bar not loaded",});},iShouldSeeActiveTourList:function(){return this.waitFor({id:"ToursOverview--SapSplToursOverView",success:function(t){ok(true,"Active tour list Available");},errorMessage:"Active tour list is not visible",});},iShouldNotSeeTATBulletChart:function(){return this.waitFor({controlType:"sap.suite.ui.commons.HeaderCell",check:function(h){if(h.length>1){return false;}else return true;},success:function(f){if(f){ok(true,"TAT bulletChart not present");}else ok(true,"TAT bulletChart present and should not be");},errorMessage:"TAT bulletChart present and should not be",});}});
